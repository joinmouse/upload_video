{"version":3,"sources":["components/upload.module.css","components/UploadVideo.js","pages/Index.js","App.js","index.js"],"names":["module","exports","UploadVideo","props","useState","title","setTitle","content","setContent","warn","setWarn","upload","useRef","className","styles","dialog_wrapper","onClick","handleClose","dialog","e","stopPropagation","htmlFor","type","value","onChange","target","name","id","cols","rows","console","log","files","ref","accept","submit","current","file","size","toFixed","Index","isVisibleUpload","setIsVisibleUpload","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"+FACAA,EAAOC,QAAU,CAAC,eAAiB,+BAA+B,OAAS,uBAAuB,KAAO,qBAAqB,OAAS,yB,wLCuFxHC,EArFK,SAACC,GAAW,IAAD,EACDC,mBAAS,IADR,mBACpBC,EADoB,KACbC,EADa,OAEGF,mBAAS,IAFZ,mBAEpBG,EAFoB,KAEXC,EAFW,OAGHJ,mBAAS,IAHN,mBAGpBK,EAHoB,KAGdC,EAHc,KAIrBC,EAASC,mBA2Df,OACI,yBAAKC,UAAWC,IAAOC,eAAgBC,QAlD3C,WACIb,EAAMc,gBAkDF,yBAAKJ,UAAWC,IAAOI,OAAQF,QA/CvC,SAA+BG,GAC3BA,EAAEC,oBA+CM,2BAAOC,QAAQ,gBACX,8CACA,2BAAOC,KAAK,OAAOC,MAAOlB,EAAOmB,SA9DjD,SAA2BL,GACvBb,EAASa,EAAEM,OAAOF,WA+DV,2BAAOF,QAAQ,gBACX,8CACA,8BAAUK,KAAK,GAAGC,GAAG,GAAGC,KAAK,KAAKC,KAAK,KAAKN,MAAOhB,EAASiB,SA9D5E,SAA6BL,GACzBX,EAAWW,EAAEM,OAAOF,WA+DZ,2BAAOF,QAAQ,4BACX,0DACA,2BAAOC,KAAK,OAAOE,SAtDnC,SAA0BL,GACtBW,QAAQC,IAAIZ,EAAEM,OAAOO,QAqDsCC,IAAKtB,EAAQe,KAAK,OAAOQ,OAAO,eAElFzB,EAAO,uBAAGI,UAAWC,IAAOL,MAAOA,GAAY,KAChD,4BAAQI,UAAWC,IAAOqB,OAAQnB,QApD9C,WACI,GAAIX,EAMJ,GAFAyB,QAAQC,IAAI1B,GACZyB,QAAQC,IAAIxB,GACRA,EAIJ,GAAII,EAAOyB,QAAQJ,MAAM,GAAzB,CAII,IAAIK,EAAO1B,EAAOyB,QAAQJ,MAAM,GACf,cAAdK,EAAKf,MAIJe,EAAKC,KAAK,KAAK,MAAMC,QAAQ,GAAK,IAClC7B,EAAQ,wDAJRA,EAAQ,4DALZA,EAAQ,yDAJRA,EAAQ,uCANRA,EAAQ,oCAkDJ,mBC3DD8B,EApBD,WAAO,IAAD,EAC8BpC,oBAAS,GADvC,mBACTqC,EADS,KACQC,EADR,KAWhB,OACI,6BACI,4JACA,4BAAQ1B,QAXhB,WACI0B,GAAmB,KAUf,4BACCD,EAAkB,kBAAC,EAAD,CAAaxB,YARxC,WACIyB,GAAmB,MAOgD,OCN5DC,MARf,WACI,OACI,yBAAK9B,UAAU,OACX,kBAAC,EAAD,QCFZ+B,IAASC,OACL,kBAAC,IAAMC,WAAP,KACI,kBAAC,EAAD,OAEJC,SAASC,eAAe,W","file":"static/js/main.e3039f61.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog_wrapper\":\"upload_dialog_wrapper__3IyZ1\",\"dialog\":\"upload_dialog__epJoY\",\"warn\":\"upload_warn__eAiC5\",\"submit\":\"upload_submit__526SI\"};","import React, {useState, useRef} from 'react'\r\nimport  styles from  './upload.module.css';\r\n\r\nconst UploadVideo = (props) => {\r\n    const [title, setTitle] = useState('')\r\n    const [content, setContent] = useState('')\r\n    const [warn, setWarn] = useState('')\r\n    const upload = useRef()\r\n\r\n    function handleChangeTitle(e) {\r\n        setTitle(e.target.value)\r\n    }\r\n\r\n    function handleChangeContent(e) {\r\n        setContent(e.target.value)\r\n    }\r\n\r\n    function handleClose() {\r\n        props.handleClose()\r\n    }\r\n\r\n    function handleStopPropagation(e) {\r\n        e.stopPropagation()\r\n    }\r\n\r\n    function handleUploadFile(e) {\r\n        console.log(e.target.files)\r\n    }\r\n\r\n    // 提交\r\n    function handleSubmit() {\r\n        if(!title) {\r\n            setWarn('标题未输入')\r\n            return\r\n        }\r\n        console.log(title)\r\n        console.log(content)\r\n        if(!content) {\r\n            setWarn('内容未输入')\r\n            return\r\n        }\r\n        if(!upload.current.files[0]) {\r\n            setWarn('未检测到上传文件')\r\n            return\r\n        }else {\r\n            let file = upload.current.files[0]\r\n            if(file.type !== 'video/mp4') {\r\n                setWarn('请上传mp4格式的视频')\r\n                return\r\n            }\r\n            if((file.size/1024/1024).toFixed(2) > 50) {\r\n                setWarn('请上传小于50Mb的文件')\r\n                return\r\n            }\r\n            /* 可以开始上传了\r\n            let xhr = new XMLHttpRequest()\r\n            xhr.open('POST', url)\r\n            xhr.send()\r\n            xhr.upload.onprogress = function(event) {\r\n                console.log(event.loaded)\r\n                console.log(event.total)\r\n            }\r\n            */\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={styles.dialog_wrapper} onClick={handleClose}>\r\n            <div className={styles.dialog} onClick={handleStopPropagation}>\r\n                <label htmlFor=\"标题\">\r\n                    <span>标题</span>\r\n                    <input type=\"text\" value={title} onChange={handleChangeTitle} />\r\n                </label>\r\n                <label htmlFor=\"描述\">\r\n                    <span>描述</span>\r\n                    <textarea name=\"\" id=\"\" cols=\"30\" rows=\"10\" value={content} onChange={handleChangeContent}></textarea>\r\n                </label>\r\n                <label htmlFor=\"上传视频\">\r\n                    <span>上传视频</span>\r\n                    <input type=\"file\" onChange={handleUploadFile} ref={upload} name=\"file\" accept=\"video/mp4\"/>\r\n                </label>\r\n                {warn ? <p className={styles.warn}>{warn}</p> : null}\r\n                <button className={styles.submit} onClick={handleSubmit}>提交</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UploadVideo","import React, { useState } from 'react';\r\nimport UploadVideo from '../components/UploadVideo';\r\n\r\nconst Index = () => {\r\n    const [isVisibleUpload, setIsVisibleUpload] = useState(false)\r\n\r\n    function handleClick() {\r\n        setIsVisibleUpload(true)\r\n    }\r\n\r\n    function handleClose() {\r\n        setIsVisibleUpload(false)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <p>请上传视频文件(仅支持mp4格式, 文件大小在50Mb以下)</p>\r\n            <button onClick={handleClick}>上传视频</button>\r\n            {isVisibleUpload ? <UploadVideo handleClose={handleClose} /> : null}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Index","import React from 'react';\nimport './App.css'\nimport Index from './pages/Index';\n\nfunction App() {\n    return (\n        <div className=\"App\">\n            <Index />\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}