(this.webpackJsonpupload_video=this.webpackJsonpupload_video||[]).push([[0],{18:function(e,t,a){e.exports=a(42)},23:function(e,t,a){},24:function(e,t,a){},3:function(e,t,a){e.exports={dialog_wrapper:"upload_dialog_wrapper__3IyZ1",dialog:"upload_dialog__epJoY",warn:"upload_warn__eAiC5",submit:"upload_submit__526SI",progress:"upload_progress__11w43"}},42:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(15),r=a.n(o),c=(a(23),a(24),a(17)),i=a(2),u=a(3),s=a.n(u),p=a(16),m=a.n(p),d=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],r=a[1],c=Object(n.useState)(""),u=Object(i.a)(c,2),p=u[0],d=u[1],f=Object(n.useState)(""),g=Object(i.a)(f,2),b=g[0],v=g[1],E=Object(n.useRef)(),h=Object(n.useRef)();function _(){e.handleClose()}return l.a.createElement("div",{className:s.a.dialog_wrapper,onClick:_},l.a.createElement("div",{className:s.a.dialog,onClick:function(e){e.stopPropagation()}},l.a.createElement("label",{htmlFor:"\u6807\u9898"},l.a.createElement("span",null,"\u6807\u9898"),l.a.createElement("input",{type:"text",value:o,onChange:function(e){r(e.target.value)}})),l.a.createElement("label",{htmlFor:"\u63cf\u8ff0"},l.a.createElement("span",null,"\u63cf\u8ff0"),l.a.createElement("textarea",{name:"",id:"",cols:"30",rows:"10",value:p,onChange:function(e){d(e.target.value)}})),l.a.createElement("label",{htmlFor:"\u4e0a\u4f20\u89c6\u9891"},l.a.createElement("span",null,"\u4e0a\u4f20\u89c6\u9891"),l.a.createElement("input",{type:"file",onChange:function(e){console.log(e.target.files)},ref:E,name:"file",accept:"video/mp4"})),l.a.createElement("div",{className:s.a.progress,ref:h}),b?l.a.createElement("p",{className:s.a.warn},b):null,l.a.createElement("button",{className:s.a.submit,onClick:function(){if(o)if(p)if(E.current.files[0]){var t=E.current.files[0];if("video/mp4"===t.type)if(t.size/1024/1024>50)v("\u8bf7\u4e0a\u4f20\u5c0f\u4e8e50Mb\u7684\u6587\u4ef6");else{var a="".concat("http://localhost:5000","/upload/video"),n=new FormData;n.append("file",t),n.append("title",o),n.append("content",p),console.log(h.current);var l=h.current;l.style.width="0",m.a.post(a,n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var t=(e.loaded/e.total*100|0)+"%";window.requestAnimationFrame((function e(){parseInt(l.style.width)<200&&(l.style.width=200*t+"px",l.innerHTML=t,window.requestAnimationFrame(e))}))}}).then((function(t){var a;0===t.data.code&&(console.log(t.data.message),a=t.data.img_url,_(),e.handleImgUrl(a))}))}else v("\u8bf7\u4e0a\u4f20mp4\u683c\u5f0f\u7684\u89c6\u9891")}else v("\u672a\u68c0\u6d4b\u5230\u4e0a\u4f20\u6587\u4ef6");else v("\u5185\u5bb9\u672a\u8f93\u5165");else v("\u6807\u9898\u672a\u8f93\u5165")}},"\u63d0\u4ea4")))},f=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)([]),u=Object(i.a)(r,2),s=u[0],p=u[1];var m={listStyle:"none",marginTop:"10px",borderBottom:"1px"};return l.a.createElement("div",null,l.a.createElement("p",null,"\u8bf7\u4e0a\u4f20\u89c6\u9891\u6587\u4ef6(\u4ec5\u652f\u6301mp4\u683c\u5f0f, \u6587\u4ef6\u5927\u5c0f\u572850Mb\u4ee5\u4e0b)"),l.a.createElement("button",{onClick:function(){o(!0)}},"\u4e0a\u4f20\u89c6\u9891"),a?l.a.createElement(d,{handleClose:function(){o(!1)},handleImgUrl:function(e){console.log("fu ".concat(e)),p((function(t){return[].concat(Object(c.a)(t),[e])})),console.log(s)}}):null,s.length>0?l.a.createElement("div",null,s.map((function(e,t){return l.a.createElement("li",{style:m,key:t},t+1,"\u3001 ",e)}))):null)};var g=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(f,null))};r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(g,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.84d6b821.chunk.js.map